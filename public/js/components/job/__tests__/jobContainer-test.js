'use strict';

jest.dontMock('../views/jobContainer');
jest.dontMock('../views/jobInfo');

// workaround to remove warnings being generated by libs using depreacted React APIs
console.warn = jest.genMockFunction();

const React = require('react');
const TestUtils = require('react/lib/ReactTestUtils');
const JobContainer = require('../views/jobContainer');

describe('JobContainer', () => {
  it('displays a message when there are no jobs', () => {
    const jobContainer = TestUtils.renderIntoDocument(
      <JobContainer jobs={[]} selectedJob={null} />
    );

    expect(jobContainer.getDOMNode().textContent).toEqual('No job selected');
  });

  it('displays a JobInfo component when there is at least one job', () => {
    const jobs = [
      { title: 'test title', body: 'test body' }
    ];

    const jobContainer = TestUtils.renderIntoDocument(
      <JobContainer jobs={jobs} selectedJob={jobs[0]} />
    );

    expect(TestUtils.findRenderedDOMComponentWithClass(
      jobContainer,
      'panel'
    )).toBeTruthy();
  });
});
